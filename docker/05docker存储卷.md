# volume

## docker的原生存储

- docker的原生存储是分层构建，联合挂载的多层镜像
- 底层为overlay文件格式，只有最上层是读写层
- cow，写时复制，删除文件只是标识为删除从而隐藏，并不是真正删除
- 缺点：iops低

## 存储卷机制

- volume存储卷机制
- 原理：将宿主机的挂载点与容器内的挂载点进行关联，容器io走宿主机io
- 特点：容器删除后，volume的数据不会丢
- 优点：iops高，可以实现两个容器的共享目录
- 集群：跨机器容器集群使用nfs等共享存储文件系统与容器关联

## 应用分类

- 有状态，需要持久化的应用：mysql
- 无状态，不需要持久化的应用：nginx
- 有状态，不需要持久化的应用：tomcat
- 无状态，需要持久化的应用


## 特性

- 删除容器不会删除卷
- 两种方式：自定义挂载或docker管理
- -v HOSTdir:容器dir
